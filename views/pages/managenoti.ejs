<% layout('/layouts/boilerplate') %>




    <div class="manage">
        <div class="container mt-5">
            <h1 class="mb-4 text-primary">Manage Notifications</h1>

            <div class="mb-4">
                <a href="/notifications/new" class="btn btn-success">+ Create New Notification</a>
            </div>

            <% if (allNotifications.length===0) { %>
                <div class="alert alert-info">No notifications available.</div>
                <% } else { %>
                    <div class="list-group">
                        <% allNotifications.forEach(notif=> { %>
                            <div class="list-group-item mb-3 shadow-sm p-4 rounded">
                                <h4 class="mb-2">
                                    <%= notif.title %>
                                </h4>
                                <p>
                                    <%= notif.content %>
                                </p>
                                <small class="text-muted">Created on <%= notif.createdAt.toDateString() %></small>
                                <% if (notif.createdBy && notif.createdBy.username) { %>
                                    by <strong>
                                        <%= notif.createdBy.username %>
                                    </strong>
                                    <% } %>

                                        <div class="mt-3">
                                            <a href="/notifications/<%= notif._id %>/edit"
                                                class="btn btn-warning btn-sm me-2">Edit</a>
                                            <form action="/notifications/<%= notif._id %>?_method=DELETE" method="POST"
                                                class="d-inline">
                                                <button type="submit" class="btn btn-danger btn-sm">Delete</button>
                                            </form>
                                        </div>


                            </div>
                            <% }) %>
                    </div>
                    <% } %>
        </div>
    </div>